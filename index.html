<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AbstractContentViewer</title>
    <script type="application/javascript">
        function init() {
            window.data = getData();
        }
        function updateLayout() {
            propagateLayoutChanges();
        }
        function setOnSubmitListener(func) {
            registerOnSubmitListener(func)
        }
    </script>
</head>
<body>
<!-- EXAMPLE CODE - EDIT BELOW TO VIEW DATA -->
<div id="question"></div>
<div id="choiceContainer" class="choicecardoptions"></div>
<script type="application/javascript">
    init();
    document.getElementById('question').innerHTML = window.data.question;
    document.getElementById('choiceContainer').innerHTML = window.data.answers.map(
        function (cur) {
            return '<div class="checkbox checkbox-material">' +
            '<label>' +
            '<input type="checkbox" class="answerCheckbox" name="' + window.data.id + '">'
            + cur.value +
            '</label>' +
            '</div>';
        }).reduce(function (acc, cur) { return acc + cur }, "");
    var isShowingSolution = false;
    setOnSubmitListener(function () {
        var checkboxes = document.getElementsByClassName('answerCheckbox');
        if(!isShowingSolution) {
            // assign classes and disable
            for (var i = 0; i < checkboxes.length; i++) {
                var isChecked = checkboxes[i].checked;
                var isCorrect = window.data.answers[i].correct;
                checkboxes[i].setAttribute('class',
                    isChecked ? (isCorrect ? 'truechecked' : 'falsechecked') : (isCorrect ? 'trueunchecked' : 'falseunchecked'));
                checkboxes[i].setAttribute('disabled', 'true');
            }
            isShowingSolution = true;
        } else {
            // remove classes and enable
            for (var i = 0; i < checkboxes.length; i++) {
                checkboxes[i].removeAttribute('class');
                checkboxes[i].removeAttribute('disabled');
            }
            isShowingSolution = false;
        }
    });
    updateLayout();
</script>
<!-- END OF EXAMPLE CODE -->
</body>
</html>